# 安装

npm i

# 启动 server

这里的 npm run build:weapp 只需要执行一次 这个后期可以靠直接输出一个模板项目来解决 就不需要 taro 参与了
npm run build:weapp && npm run server

# 简介

我的实现方式是利用了一个微信开发工具的小漏洞吧 所以只能在开发环境中使用 正式环境 还是得用 taro 来编译

其实实现原理很简单 先来了解一下小程序打包为什么会慢的原因

微信开发工具监听 dist 文件变化 -> taro build -> 将打包好的文件输出到 dist 目录 -> 微信开发工具将所有的 wxml 统一编译 -> 然后发起一个 ws -> 微信开发工具监听到这个 ws 以后执行对应的 command -> 小程序就会更新了

所以整个的链路是很长的 其次还有一点就是微信开发工具需要将所有的 wxml 都统一编译 这就导致你项目越大 编译时间越长 因为这部分是完全没办法复用的

要解决这个其实也简单 首先突破在小程序不能直接访问 docuement 的限制 然后使用正常的 esbuild 或者 webpack 打包工具来打包 不让微信开发工具来参与 又自己来控制到底要不要刷新

现在的 vite snowpack esbuild 这些的加持下 可以很轻松的就变成秒刷新 不用再长时间的等待了

其次通过修改 wx 让你可以在自己的网页中直接唤起 wx 的所有功能 并且可以正常使用
